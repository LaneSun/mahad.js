(e=>{const t={apply:(e,t,n)=>{const r=new MahadElem;return n.length&&r.attr("inner",n),r},get:(e,t)=>{const r=()=>{};return r.ename=t,r.attrs=[],new Proxy(r,n)}},n={apply:(e,t,n)=>{const r=new MahadElem(e.ename);n.length&&r.attr("inner",n);for(const[t,n]of e.attrs)r.attr(t,n);return r},get:(e,t)=>(...r)=>{const s=()=>{};return s.ename=e.ename,s.attrs=t.startsWith("$")?e.attrs.concat([[t.slice(1),r[0]]]):e.attrs.concat([[t,r]]),new Proxy(s,n)}};e.ME=new Proxy((()=>{}),t);const r=Symbol("mahad"),s={id:e=>[t=>e.id=t],title:e=>[t=>e.title=t],text:e=>[t=>e.textContent=t],class:e=>[t=>e.classList.add(t),t=>e.classList.remove(t)],src:e=>[t=>e.src=t],show:e=>[t=>{e.hidden=!t,t?e.classList.remove("f-hide"):e.classList.add("f-hide")}],value:(e,t)=>(e.addEventListener("change",(()=>{t.val=e.value})),[t=>e.value=t]),style:e=>[(t,n)=>{t instanceof Array?t.guard(e,(t=>e.style.setProperty(n,t))):e.style.setProperty(n,t)},(t,n)=>{t instanceof Array&&t.unset_to(e),e.style.removeProperty(n)}],on:e=>[(t,n)=>{t instanceof Array?t.guard(e,(t=>e.addEventListener(n,t))):e.addEventListener(n,t)},(t,n)=>{t instanceof Array?t.unguard(e):e.removeEventListener(n,t)}],inner:e=>[(t,n)=>{const r=a(t);n===e.childNodes.length?e.append(r):e.insertBefore(r,e.childNodes[n])},(t,n)=>{e.childNodes[n].remove()}]},a=e=>{if(e instanceof MahadElem)return e.elem;if(e instanceof Node)return e;if(globalThis.jQuery&&e instanceof jQuery)return e[0];if(e instanceof Promise){const t=i();return e.then((e=>t.replaceWith(a(e)))),t}return"object"!=typeof e?new Text(e):void 0},i=()=>document.createElement("div");e.MahadElem=class e extends MahadObject{constructor(e="div"){super(),this.name=e,this.elem=document.createElement(this.name),this.elem[r]=this}attr(e,t=[""]){if(e in this)return this[e];{const n=s[e];return n&&this.modify(e,t.guard(null,...n(this.elem,t))),t}}attach(t){if("string"==typeof t)document.querySelector(t).append(this.elem);else if(t instanceof HTMLElement)t.append(this.elem);else if(t instanceof e)t.attr("inner").suffix(this);else{if(!(globalThis.jQuery&&t instanceof jQuery))throw"Unexpect attach target";t.append(this.elem)}}}})(globalThis);